name: Scheduled redeploy (Vercel)

on:
  schedule:
    # GitHub Actions CRON UTC ile çalışır. TR (UTC+3) için saatler:
    # 10:00 TR -> 07:00 UTC
    - cron: '0 7 * * *'
    # 12:00 TR -> 09:00 UTC
    - cron: '0 9 * * *'
    # 13:00 TR -> 10:00 UTC
    - cron: '0 10 * * *'
    # 15:00 TR -> 12:00 UTC
    - cron: '0 12 * * *'
    # 16:00 TR -> 13:00 UTC
    - cron: '0 13 * * *'
    # 17:00 TR -> 14:00 UTC
    - cron: '0 14 * * *'
    # 19:00 TR -> 16:00 UTC
    - cron: '0 16 * * *'
  workflow_dispatch: {}

jobs:
  redeploy:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Vercel Deploy Hook
        env:
          HOOK: ${{ secrets.VERCEL_DEPLOY_HOOK }}
        run: |
          if [ -z "$HOOK" ]; then
            echo "VERCEL_DEPLOY_HOOK secret not set" >&2
            exit 1
          fi
          code=$(curl -s -o /dev/null -w "%{http_code}" -X POST "$HOOK")
          echo "HTTP $code"
          if [ "$code" -ge 200 ] && [ "$code" -lt 300 ]; then
            echo "Triggered successfully"
          else
            echo "Failed to trigger" >&2
            exit 1
          fi


