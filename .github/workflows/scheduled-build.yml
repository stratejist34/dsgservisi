name: Scheduled Blog Build

on:
  schedule:
    # Her gün saat 02:00'te (UTC) - Türkiye saati 05:00
    # Bu saatte yeni yazılar yayınlanır
    - cron: '0 2 * * *'
  workflow_dispatch: # Manuel tetikleme için

permissions:
  contents: read

jobs:
  trigger-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Vercel Deploy
        env:
          VERCEL_DEPLOY_HOOK_URL: ${{ secrets.VERCEL_DEPLOY_HOOK_URL }}
        run: |
          if [ -z "$VERCEL_DEPLOY_HOOK_URL" ]; then
            echo "Vercel deploy hook URL not set. Skipping deploy."
            exit 0
          fi
          echo "Triggering Vercel deploy for scheduled blog posts..."
          curl -X POST "$VERCEL_DEPLOY_HOOK_URL" || echo "Deploy hook failed"
