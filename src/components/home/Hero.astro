---
import { SITE_CONFIG } from '@utils/constants';
import BrandLogos from './BrandLogos';
import { Award, Wrench, Zap, ShieldCheck, Car, Phone, Settings, Gauge, Cog } from 'lucide-astro';
---

<section class="relative min-h-[85vh] flex items-center justify-center overflow-hidden">
  {/* Background Image - Workshop */}
  <div class="absolute inset-0">
    <picture>
      {/* AVIF - En iyi sıkıştırma */}
      <source 
        type="image/avif"
        sizes="100vw"
        srcset="/images/hero-bg-480.avif?v=5 480w, /images/hero-bg-768.avif?v=5 768w, /images/hero-bg-1280.avif?v=5 1280w, /images/hero-bg-1920.avif?v=5 1920w"
      />
      {/* WebP - Fallback (JPG silindi) */}
      <img 
        src="/images/hero-bg.webp?v=5" 
        alt="DSG Servisi Atölyesi" 
        class="w-full h-full object-cover"
        fetchpriority="high"
        loading="eager"
        width="1920"
        height="1080"
        decoding="async"
        srcset="/images/hero-bg-480.webp?v=5 480w, /images/hero-bg-768.webp?v=5 768w, /images/hero-bg-1280.webp?v=5 1280w, /images/hero-bg-1920.webp?v=5 1920w"
        sizes="100vw"
      />
    </picture>
    {/* Gradient Overlay Mask */}
    <div class="absolute inset-0 bg-gradient-to-bl from-navy/85 via-navy/80 to-navy/85"></div>
  </div>

  {/* Subtle Pattern Overlay (reduced opacity) */}
  <div class="absolute inset-0 opacity-8">
    <div class="absolute inset-0" style="background-image: url('data:image/svg+xml,%3Csvg width=\'60\' height=\'60\' viewBox=\'0 0 60 60\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cg fill=\'none\' fill-rule=\'evenodd\'%3E%3Cg fill=\'%231a9cb0\' fill-opacity=\'0.4\'%3E%3Cpath d=\'M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z\'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');"></div>
  </div>

  {/* Lightweight radial breathing background (opacity-only) */}
  <div class="absolute inset-0 pointer-events-none" style="background: radial-gradient(ellipse at 30% 30%, rgba(249,115,22,0.10), transparent 60%), radial-gradient(ellipse at 70% 70%, rgba(220,38,38,0.08), transparent 60%);"></div>

  <div class="container mx-auto px-4 py-12 relative z-10">
    <div class="max-w-5xl mx-auto text-center">
      {/* Main Heading */}
      <h1 class="font-display font-bold mb-6 tracking-tight" data-reveal>
        <span class="block text-white/90 text-3xl md:text-4xl lg:text-5xl mb-3 font-medium uppercase tracking-wider">
          VOLKSWAGEN GRUBU
        </span>
        <span class="flex flex-wrap items-center justify-center gap-x-4 text-4xl md:text-6xl lg:text-7xl font-extrabold tracking-tighter leading-tight">
          <span class="relative inline-block group overflow-hidden">
            <span class="text-gradient relative z-10">DSG ŞANZIMAN</span>
            <span class="shine-bar pointer-events-none absolute inset-y-0 left-[-25%] w-[40%] bg-gradient-to-r from-transparent via-white/30 to-transparent opacity-0 transition-opacity duration-500" style="transform: translateX(-120%);"></span>
          </span>
          <span class="text-white">SERVİSİ</span>
        </span>
      </h1>

      {/* Description */}
      <p class="text-xl md:text-2xl text-gray-300 mb-12 max-w-3xl mx-auto leading-relaxed" data-reveal>
        <span class="text-primary font-semibold">{SITE_CONFIG.stats.experience} yıldır</span> 
        {' '}VW, Audi, Seat, Skoda, BMW, Mercedes, Porsche ve Land Rover araçlarında 
        <span class="text-white font-semibold"> DSG şanzıman ve mekatronik tamiri</span>.
        {' '}İstanbul Büyükçekmece'de güvenilir servis.
      </p>

      {/* CTA Buttons */}
      <div class="flex flex-col sm:flex-row gap-4 justify-center mb-16">
        <a
          data-animate
          href={`tel:${SITE_CONFIG.phoneFormatted}`}
          class="group relative inline-flex items-center justify-center px-10 py-5 text-lg font-bold text-white rounded-xl overflow-hidden transition-all duration-300 hover:-translate-y-0.5 cta-ease-fast"
          style="background: linear-gradient(135deg, rgba(249,115,22,1) 0%, rgba(220,38,38,1) 50%, rgba(249,115,22,1) 100%); box-shadow: 0 4px 15px rgba(249,115,22,0.3);"
          onmouseenter="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(249,115,22,0.4)';"
          onmouseleave="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(249,115,22,0.3)';"
        >
          {/* Subtle shimmer effect */}
          <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"></div>
          <svg
            class="w-6 h-6 mr-3 relative z-10"
            fill="none"
            stroke="currentColor"
            stroke-width="2.5"
            viewBox="0 0 24 24"
          >
            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" />
          </svg>
          <span class="relative z-10 font-display tracking-wide">HEMEN ARA</span>
        </a>
        <a
          data-animate
          href="/hizmetlerimiz"
          class="group inline-flex items-center justify-center px-10 py-5 text-lg font-bold text-navy bg-white rounded-xl border-2 border-white/30 hover:border-primary shadow-xl premium-shine transition-transform duration-300 hover:scale-[1.02] hover:-translate-y-0.5 cta-ease-soft"
        >
          <span class="font-display tracking-wide">HİZMETLERİMİZ</span>
          <svg class="w-6 h-6 ml-3 group-hover:translate-x-2 transition-transform duration-300" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
          </svg>
        </a>
      </div>

  {/* DSG Badge - Özel Vurgu */}
      <div class="mb-8" data-animate data-badge>
    <div class="inline-flex items-center gap-4 bg-gradient-to-r from-primary/20 via-urgent/20 to-primary/20 px-10 py-5 rounded-2xl border-2 border-primary/30 premium-shine transition-transform duration-300 hover:scale-[1.01]">
          <div class="relative">
            <div class="relative w-14 h-14 bg-gradient-to-br from-primary to-urgent rounded-lg flex items-center justify-center shadow-xl">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
          </div>
          <div class="flex flex-col">
            <span class="text-white font-display font-black text-2xl tracking-tight uppercase">DSG Uzmanı</span>
            <span class="text-primary-400 font-tech text-sm tracking-widest uppercase">Certified Specialist</span>
          </div>
        </div>
      </div>

      {/* Brand Logos */}
      <div data-reveal>
        <p class="text-gray-400 text-sm uppercase tracking-wider mb-6 font-semibold">
          Çalıştığımız Markalar
        </p>
        <BrandLogos client:visible />
      </div>
    </div>
  </div>

  {/* Scroll indicator (reduced motion safe) */}
  <div class="absolute bottom-20 left-1/2 transform -translate-x-1/2 z-20">
    <svg class="w-6 h-6 text-white/50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
    </svg>
  </div>

  {/* Kayan Yazı Bandı */}
  <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-r from-primary/90 via-primary to-primary/90 border-t border-primary/30 overflow-hidden">
    <div class="marquee-container">
      <div class="marquee-content">
        <span class="marquee-item">
          <Award class="marquee-icon" size={16} stroke-width={2.5} />
          15 Yıllık Tecrübe
        </span>
        <span class="marquee-separator">•</span>
        <span class="marquee-item">
          <Settings class="marquee-icon" size={16} stroke-width={2.5} />
          VW Grubu DSG ÖZEL Servis
        </span>
        <span class="marquee-separator">•</span>
        <span class="marquee-item">
          <Wrench class="marquee-icon" size={16} stroke-width={2.5} />
          DSG Şanzıman Tamiri
        </span>
        <span class="marquee-separator">•</span>
        <span class="marquee-item">
          <ShieldCheck class="marquee-icon" size={16} stroke-width={2.5} />
          Garantili Onarım
        </span>
        <span class="marquee-separator">•</span>
        <span class="marquee-item">
          <Car class="marquee-icon" size={16} stroke-width={2.5} />
          VW • Audi • Seat • Skoda
        </span>
        <span class="marquee-separator">•</span>
        <span class="marquee-item">
          <Phone class="marquee-icon" size={16} stroke-width={2.5} />
          7/24 Destek
        </span>
        <span class="marquee-separator">•</span>
        <span class="marquee-item">
          <Gauge class="marquee-icon" size={16} stroke-width={2.5} />
          DSG Volant Değişimi
        </span>
        <span class="marquee-separator">•</span>
        <span class="marquee-item">
          <Cog class="marquee-icon" size={16} stroke-width={2.5} />
          DSG Mekatronik Tamiri
        </span>
        <span class="marquee-separator">•</span>
        <span class="marquee-item">
          <Zap class="marquee-icon" size={16} stroke-width={2.5} />
          Dsg Şanzıman Yağ Değişimi
        </span>
        <span class="marquee-separator">•</span>
        <span class="marquee-item">
          <ShieldCheck class="marquee-icon" size={16} stroke-width={2.5} />
          Audi S-Tronic Tamiri
        </span>
        <span class="marquee-separator">•</span>
        <span class="marquee-item">
          <Car class="marquee-icon" size={16} stroke-width={2.5} />
          ZF Şanzıman Tamiri
        </span>
        <span class="marquee-separator">•</span>
        <span class="marquee-item">
          <Gauge class="marquee-icon" size={16} stroke-width={2.5} />
          7 İleri Şanzıman Revizyon
        </span>
        <span class="marquee-separator">•</span>
        <span class="marquee-item">
          <Settings class="marquee-icon" size={16} stroke-width={2.5} />
          Orjinal veya Yan Sanayi Alternatif Yedek Parça
        </span>
        <span class="marquee-separator">•</span>
        <span class="marquee-item">
          <Zap class="marquee-icon" size={16} stroke-width={2.5} />
          İstanbul Avrupa Yakası
        </span>
        <span class="marquee-separator">•</span>
      </div>
    </div>
  </div>
</section>

<style is:inline>
  /* Stars and heavy glow removed per performance rules */
  .shine-bar {
    will-change: transform;
  }
  .group:hover > .shine-bar { 
    transform: translateX(180%);
    opacity: 1;
    transition: transform 1200ms cubic-bezier(0.22, 1, 0.36, 1), opacity 400ms ease-out;
  }
  /* Run once when title reveals (works on mobile too) */
  .reveal--in .shine-bar {
    transform: translateX(180%);
    opacity: 1;
    transition: transform 1200ms cubic-bezier(0.22, 1, 0.36, 1), opacity 400ms ease-out;
    transition-delay: 120ms;
  }
  .reveal--in .shine-bar {
    will-change: auto;
  }

  /* Kayan Yazı Bandı - Infinite Scroll */
  .marquee-container {
    overflow: hidden;
    white-space: nowrap;
    position: relative;
    height: 50px;
    display: flex;
    align-items: center;
  }

  .marquee-content {
    display: inline-flex;
    align-items: center;
    animation: marquee 30s linear infinite;
  }

  .marquee-item {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 0 20px;
    font-size: 14px;
    font-weight: 600;
    color: white;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    white-space: nowrap;
  }

  .marquee-icon {
    flex-shrink: 0;
    color: rgba(249, 115, 22, 1);
    filter: drop-shadow(0 0 4px rgba(249, 115, 22, 0.4));
  }

  .marquee-separator {
    display: inline-block;
    color: rgba(249, 115, 22, 0.6);
    padding: 0 10px;
    font-size: 12px;
  }

  @keyframes marquee {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .marquee-content {
      animation: none;
    }
  }
</style>

